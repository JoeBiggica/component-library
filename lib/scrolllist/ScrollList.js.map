{"version":3,"sources":["../../components/scrolllist/ScrollList.jsx"],"names":["React","PureComponent","PropTypes","classnames","debounce","NavButton","alignment","LEFT","RIGHT","CENTER","ScrollList","props","document","documentElement","style","item_ref","supportSmoothScroll","scrollIntoView","inline","block","behavior","scroller","scroller_ref","current","window","scrollTo","offsetLeft","clientWidth","amount","scrollBy","top","left","scrollLeft","item_width","scrollWidth","items","length","half_scroller_width","Math","max","getStepDistance","pos","left_bound","right_bound","reached_left_bound","reached_right_bound","setState","item","index","current_item_index","item_className","ref","item_refs","renderItem","state","createRef","debouncedHandleScroll","handleScroll","leading","trailing","resize_observer","ResizeObserver","observe","cancel","disconnect","prev_props","className","prev_button_className","next_button_className","button_theme","button_size","children","styles","Direction","prevStep","nextStep","map","Theme","array","isRequired","func","node","string","oneOf","Object","values","number"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport debounce from 'lodash/debounce';\nimport NavButton from 'components/navbutton';\n\nimport styles from './ScrollList.scss';\n\n\nconst alignment = {\n\tLEFT: 'left',\n\tRIGHT: 'right',\n\tCENTER: 'center',\n};\n\nclass ScrollList extends PureComponent {\n\n\tstatic Alignment = alignment\n\n\tstatic ButtonTheme = NavButton.Theme\n\n\tstatic propTypes = {\n\t\titems: PropTypes.array.isRequired,\n\t\trenderItem: PropTypes.func.isRequired,\n\t\tchildren: PropTypes.node,\n\t\tclassName: PropTypes.string,\n\t\titem_className: PropTypes.string,\n\t\talignment: PropTypes.oneOf(Object.values(alignment)),\n\t\tcurrent_item_index: PropTypes.number,\n\t\tbutton_theme: PropTypes.string,\n\t\tbutton_size: PropTypes.string,\n\t\tprev_button_className: PropTypes.string,\n\t\tnext_button_className: PropTypes.string,\n\t}\n\n\tstatic defaultProps = {\n\t\talignment: alignment.LEFT,\n\t\tcurrent_item_index: -1,\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.state = {\n\t\t\treached_left_bound: true,\n\t\t\treached_right_bound: true,\n\t\t};\n\n\t\tthis.scroller_ref = React.createRef();\n\t\tthis.item_refs = [];\n\n\t\tthis.debouncedHandleScroll = debounce(this.handleScroll, 100, {\n\t\t\tleading: false,\n\t\t\ttrailing: true,\n\t\t});\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.resize_observer = new window.ResizeObserver(this.debouncedHandleScroll);\n\t\tthis.resize_observer.observe(this.scroller_ref.current);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.debouncedHandleScroll.cancel();\n\t\tthis.resize_observer.disconnect();\n\t}\n\n\tcomponentDidUpdate(prev_props) {\n\t\tif (prev_props.current_item_index !== this.props.current_item_index) {\n\t\t\tconst item_ref = this.item_refs[this.props.current_item_index];\n\t\t\tif (item_ref) {\n\t\t\t\tthis.scrollIntoView(item_ref);\n\t\t\t}\n\t\t}\n\t}\n\n\tsupportSmoothScroll = () => {\n\t\treturn 'scrollBehavior' in document.documentElement.style;\n\t}\n\n\tscrollIntoView = item_ref => {\n\t\tif (this.supportSmoothScroll()) {\n\t\t\titem_ref.scrollIntoView({\n\t\t\t\tinline: 'center',\n\t\t\t\tblock: 'nearest',\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t} else {\n\t\t\tconst scroller = this.scroller_ref.current;\n\t\t\tif (window.scrollTo()) {\n\t\t\t\tscroller.scrollTo(item_ref.offsetLeft - scroller.clientWidth / 2 + item_ref.clientWidth / 2, 0);\n\t\t\t}\n\t\t}\n\t}\n\n\tscrollBy = amount => {\n\t\tconst scroller = this.scroller_ref.current;\n\t\tif (this.supportSmoothScroll()) {\n\t\t\tscroller.scrollBy({\n\t\t\t\ttop: 0,\n\t\t\t\tleft: amount,\n\t\t\t\tbehavior: 'smooth',\n\t\t\t});\n\t\t} else {\n\t\t\tscroller.scrollLeft += amount;\n\t\t}\n\t}\n\n\tgetStepDistance = () => {\n\t\tconst item_width = this.scroller_ref.current.scrollWidth / this.props.items.length;\n\t\tconst half_scroller_width = this.scroller_ref.current.clientWidth / 2;\n\t\treturn Math.max(item_width, half_scroller_width);\n\t}\n\n\tnextStep = () => {\n\t\tthis.scrollBy(this.getStepDistance());\n\t}\n\n\tprevStep = () => {\n\t\tthis.scrollBy(-this.getStepDistance());\n\t}\n\n\thandleScroll = () => {\n\t\tconst scroller = this.scroller_ref.current;\n\t\tconst pos = scroller.scrollLeft;\n\t\tconst left_bound = 0;\n\t\tconst right_bound = scroller.scrollWidth - scroller.clientWidth;\n\t\tconst reached_left_bound = pos <= left_bound;\n\t\tconst reached_right_bound = pos >= right_bound;\n\n\t\tthis.setState({\n\t\t\treached_left_bound,\n\t\t\treached_right_bound,\n\t\t});\n\t}\n\n\trenderItem = (item, index) => {\n\t\tconst current = index === this.props.current_item_index;\n\n\t\treturn (\n\t\t\t<li\n\t\t\t\tkey={`item-${index}`}\n\t\t\t\tclassName={this.props.item_className}\n\t\t\t\tref={ref => this.item_refs[index] = ref}\n\t\t\t>\n\t\t\t\t{this.props.renderItem(item, index, current)}\n\t\t\t</li>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tclassName,\n\t\t\tprev_button_className,\n\t\t\tnext_button_className,\n\t\t\tbutton_theme,\n\t\t\tbutton_size,\n\t\t\talignment,\n\t\t\titems,\n\t\t\tchildren,\n\t\t} = this.props;\n\n\t\tconst {\n\t\t\treached_left_bound,\n\t\t\treached_right_bound,\n\t\t} = this.state;\n\n\t\treturn (\n\t\t\t<div className={className}>\n\t\t\t\t<div className={styles['container']}>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tclassName={classnames(styles['prev-button'], prev_button_className)}\n\t\t\t\t\t\tdirection={NavButton.Direction.LEFT}\n\t\t\t\t\t\ttheme={button_theme}\n\t\t\t\t\t\tsize={button_size}\n\t\t\t\t\t\thidden={reached_left_bound}\n\t\t\t\t\t\tonClick={this.prevStep}\n\t\t\t\t\t/>\n\t\t\t\t\t<NavButton\n\t\t\t\t\t\tclassName={classnames(styles['next-button'], next_button_className)}\n\t\t\t\t\t\tdirection={NavButton.Direction.RIGHT}\n\t\t\t\t\t\ttheme={button_theme}\n\t\t\t\t\t\tsize={button_size}\n\t\t\t\t\t\thidden={reached_right_bound}\n\t\t\t\t\t\tonClick={this.nextStep}\n\t\t\t\t\t/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classnames(styles['scroller'], styles[alignment])}\n\t\t\t\t\t\tref={this.scroller_ref}\n\t\t\t\t\t\tonScroll={this.debouncedHandleScroll}\n\t\t\t\t\t>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{items.map(this.renderItem)}\n\t\t\t\t\t\t\t{children}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default ScrollList;\n"],"file":"ScrollList.js"}