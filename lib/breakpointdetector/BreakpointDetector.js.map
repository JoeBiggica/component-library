{"version":3,"sources":["../../components/breakpointdetector/BreakpointDetector.jsx"],"names":["React","PureComponent","PropTypes","classnames","throttle","isEqual","BreakpointDetector","props","breakpoints","elements","renderBreakpoint","bind","setBreakpointRef","detectChange","throttledDetectChange","window","addEventListener","removeEventListener","prev_props","prev_state","state","onChange","length","onInitialChange","res","Object","values","filter","elementDisplayed","map","el","getAttribute","setState","getComputedStyle","display","currentStyle","component","className","key","styles","container_classname","debug","bool","func"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport throttle from 'lodash/throttle';\nimport isEqual from 'lodash/isEqual';\n\nimport styles from './BreakpointDetector.scss';\n\n/**\n * Breakpoint detector\n */\nexport default class BreakpointDetector extends PureComponent {\n\n\tstatic propTypes = {\n\t\tdebug: PropTypes.bool,\n\t\tonChange: PropTypes.func,\n\t\tonInitialChange: PropTypes.func,\n\t}\n\n\tstatic defaultProps = {\n\t\tdebug: false,\n\t\tonChange: () => {},\n\t\tonInitialChange: () => {},\n\t}\n\n\t// Default state\n\tstate = {\n\t\tbreakpoints: [],\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t\n\t\tthis.breakpoints = [\n\t\t\t'for-phone-only',\n\t\t\t'for-tablet-portrait-up',\n\t\t\t'for-tablet-landscape-up',\n\t\t\t'for-desktop-up',\n\t\t\t'for-wide-desktop-up',\n\t\t];\n\n\t\t// Keep element refs here\n\t\tthis.elements = {};\n\n\t\tthis.renderBreakpoint = this.renderBreakpoint.bind(this);\n\t\tthis.setBreakpointRef = this.setBreakpointRef.bind(this);\n\t\tthis.detectChange = this.detectChange.bind(this);\n\t\tthis.throttledDetectChange = throttle(this.detectChange, 200);\n\t}\n\n\tcomponentDidMount() {\n\t\twindow.addEventListener('resize', this.throttledDetectChange);\n\t\tthis.detectChange();\n\t}\n\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.throttledDetectChange);\n\t}\n\n\tcomponentDidUpdate(prev_props, prev_state) {\n\t\tif (prev_state.breakpoints !== this.state.breakpoints) {\n\t\t\tthis.props.onChange(this.state.breakpoints);\n\n\t\t\tif (!prev_state.breakpoints.length) {\n\t\t\t\tthis.props.onInitialChange(this.state.breakpoints);\n\t\t\t}\n\t\t}\n\t}\n\n\tdetectChange() {\n\t\tconst res = Object.values(this.elements)\n\t\t\t.filter(this.elementDisplayed);\n\n\t\tconst breakpoints = res.map(el => el.getAttribute('data-name'));\n\n\t\tif (!isEqual(this.state.breakpoints, breakpoints)) {\n\t\t\tthis.setState({\n\t\t\t\tbreakpoints\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Check if element has display set to block\n\t * @param {Element} $el\n\t * @return {boolean}\n\t */\n\telementDisplayed(el) {\n\t\tif (typeof window.getComputedStyle !== 'undefined') {\n\t\t\treturn window.getComputedStyle(el, null).display !== 'none';\n\t\t}\n\n\t\treturn el.currentStyle && el.currentStyle.display !== 'none';\n\t}\n\n\t// Set reference to breakpoint element\n\tsetBreakpointRef(component) {\n\t\tif (!component) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.elements[component.className] = component;\n\t}\n\n\t/**\n\t * Render a single breakpoint\n\t * @return {Component}\n\t */\n\trenderBreakpoint(key) {\n\t\treturn (\n\t\t\t<span\n\t\t\t\tkey={key}\n\t\t\t\tref={this.setBreakpointRef}\n\t\t\t\tclassName={styles[key]}\n\t\t\t\tdata-name={key}\n\t\t\t>\n\t\t\t\t{key}\n\t\t\t</span>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst container_classname = classnames(styles['container'], this.props.debug && styles['debug']);\n\n\t\treturn (\n\t\t\t<div className={container_classname}>\n\t\t\t\t{this.breakpoints.map(this.renderBreakpoint)}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"],"file":"BreakpointDetector.js"}