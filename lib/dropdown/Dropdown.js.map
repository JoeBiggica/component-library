{"version":3,"sources":["../../components/dropdown/Dropdown.jsx"],"names":["React","PureComponent","createContext","PropTypes","classnames","CaretUp","context","toggle","toggleMenu","Provider","Consumer","DropdownToggle","className","className_active","children","label","labelledBy","composed_className","styles","propTypes","node","string","DropdownMenu","className_caret","theme","Theme","NONE","DEFAULT","oneOf","Object","values","DropdownMenuWrapper","e","container","contains","target","props","key","document","addEventListener","handleClickOutside","handleKeyDown","removeEventListener","prev_props","no_theme","ref","caret","bool","func","isRequired","Dropdown","setState","state"],"mappings":"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","sourcesContent":["import React, { PureComponent, createContext } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport CaretUp from 'components/icons/caretup.svg';\nimport styles from './Dropdown.scss';\n\nconst context = createContext({\n\ttoggle: false,\n\ttoggleMenu: () => {},\n});\n\nconst { Provider, Consumer } = context;\n\nconst DropdownToggle = ({ className, className_active, children, label, labelledBy }) => (\n\t<Consumer>\n\t\t{({ toggle, toggleMenu }) => {\n\t\t\tconst composed_className = classnames(\n\t\t\t\tstyles.toggle,\n\t\t\t\tclassName,\n\t\t\t\ttoggle && className_active\n\t\t\t);\n\n\t\t\treturn (\n\t\t\t\t<button\n\t\t\t\t\taria-label={label}\n\t\t\t\t\taria-labelledby={labelledBy}\n\t\t\t\t\taria-expanded={toggle}\n\t\t\t\t\ttype='button'\n\t\t\t\t\tclassName={composed_className}\n\t\t\t\t\tonClick={toggleMenu}\n\t\t\t\t>\n\t\t\t\t\t{children}\n\t\t\t\t</button>\n\t\t\t);\n\t\t}}\n\t</Consumer>\n);\n\nDropdownToggle.propTypes = {\n\tchildren: PropTypes.node,\n\tclassName: PropTypes.string,\n\tclassName_active: PropTypes.string,\n\tlabel: PropTypes.string,\n\tlabelledBy: PropTypes.string\n};\n\nconst DropdownMenu = ({ className, className_caret, theme, children }) => (\n\t<Consumer>\n\t\t{({ toggle, toggleMenu }) => (toggle &&\n\t\t\t<DropdownMenuWrapper\n\t\t\t\tclassName={className}\n\t\t\t\tclassName_caret={className_caret}\n\t\t\t\ttheme={theme}\n\t\t\t\ttoggle={toggle}\n\t\t\t\ttoggleMenu={toggleMenu}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</DropdownMenuWrapper>\n\t\t)}\n\t</Consumer>\n);\n\nDropdownMenu.Theme = {\n\tNONE: 'none',\n\tDEFAULT: 'default',\n};\n\nDropdownMenu.propTypes = {\n\ttheme: PropTypes.oneOf(Object.values(DropdownMenu.Theme)),\n\tchildren: PropTypes.node,\n\tclassName: PropTypes.string,\n\tclassName_caret: PropTypes.string,\n};\n\n\nclass DropdownMenuWrapper extends PureComponent {\n\n\tstatic propTypes = {\n\t\ttheme: PropTypes.oneOf(Object.values(DropdownMenu.Theme)),\n\t\tchildren: PropTypes.node,\n\t\tclassName: PropTypes.string,\n\t\tclassName_caret: PropTypes.string,\n\t\ttoggle: PropTypes.bool,\n\t\ttoggleMenu: PropTypes.func.isRequired,\n\t}\n\n\tstatic defaultProps = {\n\t\ttheme: DropdownMenu.Theme.DEFAULT,\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener('click', this.handleClickOutside);\n\t\tdocument.addEventListener('keydown', this.handleKeyDown);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.removeEventListener('click', this.handleClickOutside);\n\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\n\t}\n\n\tcomponentDidUpdate(prev_props) {\n\t\tif (this.props.toggle !== prev_props.toggle) {\n\t\t\tif (this.props.toggle) {\n\t\t\t\tdocument.addEventListener('click', this.handleClickOutside);\n\t\t\t\tdocument.addEventListener('keydown', this.handleKeyDown);\n\t\t\t} else {\n\t\t\t\tdocument.removeEventListener('click', this.handleClickOutside);\n\t\t\t\tdocument.removeEventListener('keydown', this.handleKeyDown);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleClickOutside = e => {\n\t\tif (!this.container.contains(e.target)) {\n\t\t\tthis.props.toggleMenu();\n\t\t}\n\t}\n\n\thandleKeyDown = e => {\n\t\tif (e.key === 'Escape' && this.props.toggle) {\n\t\t\tthis.props.toggleMenu();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { className, className_caret, theme, children } = this.props;\n\t\tconst no_theme = (theme === DropdownMenu.Theme.NONE);\n\t\tconst composed_className = classnames(\n\t\t\tclassName,\n\t\t\tstyles['dropdown-menu'],\n\t\t\t!no_theme && styles[theme],\n\t\t);\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tref={ref => this.container = ref}\n\t\t\t\tclassName={composed_className}\n\t\t\t>\n\t\t\t\t{!no_theme && <CaretUp className={classnames(styles.caret, className_caret)} />}\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nclass Dropdown extends PureComponent {\n\tstatic propTypes = {\n\t\tchildren: PropTypes.node,\n\t};\n\n\tstate = {\n\t\ttoggle: false,\n\t};\n\n\ttoggleMenu = () => {\n\t\tthis.setState({\n\t\t\ttoggle: !this.state.toggle,\n\t\t});\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<Provider\n\t\t\t\tvalue={{\n\t\t\t\t\ttoggle: this.state.toggle,\n\t\t\t\t\ttoggleMenu: this.toggleMenu,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{this.props.children}\n\t\t\t</Provider>\n\t\t);\n\t}\n}\n\nexport default Dropdown;\nexport { DropdownToggle, DropdownMenu };\n"],"file":"Dropdown.js"}